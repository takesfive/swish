"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){var a=[window.Element,window.CharacterData,window.DocumentType],b=[];a.forEach(function(a){a&&b.push(a.prototype)}),function(a){a.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}(b)})();var Swish=function(){var b=Math.abs,c=Math.round,d=Math.ceil;function a(b){_classCallCheck(this,a),this.slider=b,this.counter=0,this.currentTransform=0,this.preventMove=!1,this.transformCss=this.supportTransformCss("transform"),this.resizeTimeout=0,this.cacheWindowSize=document.documentElement.clientWidth,this.touch={delayAndDir:0,isTouch:!1,isTouchAction:null,startX:0,startY:0,moveX:0,moveY:0,move:0,canMove:!1,delay:40},this.drag={shiftX:0,startX:0,endX:0,move:0,prevent:!1}}return _createClass(a,[{key:"spreadHtmlArrayHelper",value:function(a){return Array.prototype.slice.call(a)}},{key:"arrayFromLengthHelper",value:function(a){return Array.apply(null,Array(a))}},{key:"supportTransformCss",value:function(a){var b=!1;return"-moz-"+a in document.body.style&&(b="mozTransform"),"-webkit-"+a in document.body.style&&(b="webkitTransform"),"-ms-"+a in document.body.style&&(b="msTransform"),"-o-"+a in document.body.style&&(b="oTransform"),a in document.body.style&&(b="transform"),b}},{key:"getSize",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return d(a/b)-c}},{key:"setSize",value:function(a,b){this.spreadHtmlArrayHelper(a).forEach(function(a){return a.style.width="".concat(b,"px")})}},{key:"getSizeContainer",value:function(a,b){return d(a*b)}},{key:"setSizeContainer",value:function(a,b){a.style.width="".concat(b,"px")}},{key:"activeSetter",value:function(a){var b=this;this.spreadHtmlArrayHelper(a.children).forEach(function(a){a.classList.remove("active"),a.setAttribute("aria-hidden",!0)}),this.arrayFromLengthHelper(this.config.slides).forEach(function(c,d){a.children[b.counter+d].classList.add("active"),a.children[b.counter+d].setAttribute("aria-hidden",!1)})}},{key:"isGrab",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];a?this.list.setAttribute("is-grab",!0):this.list.removeAttribute("is-grab")}},{key:"paginationActiveSetter",value:function(a){var b=this;this.config.pagination&&1===this.config.slides&&(this.spreadHtmlArrayHelper(a.children).forEach(function(a){a.classList.remove("active")}),this.config.infinity?this.arrayFromLengthHelper(this.config.slides).forEach(function(c,d){a.children[b.counter-b.config.slides+d]&&a.children[b.counter-b.config.slides+d].classList.add("active")}):this.arrayFromLengthHelper(this.config.slides).forEach(function(c,d){a.children[b.counter+d].classList.add("active")}))}},{key:"pagination",value:function(){var a=this;if(this.config.pagination&&1===this.config.slides){this.slider.querySelector(".swish-pagination")&&this.slider.querySelector(".swish-pagination").remove();var b=document.createElement("div"),c=document.createElement("div");b.classList.add("swish-pagination"),c.classList.add("swish-pagination__list");var d=this.arrayFromLengthHelper(this.listItemsNoCloned.length).map(function(){return"<div class=\"swish-pagination__list-item\"></div>"});c.innerHTML=d.join(""),b.appendChild(c),this.slider.appendChild(b),this.spreadHtmlArrayHelper(this.slider.querySelectorAll(".swish-pagination__list-item")).forEach(function(b,c){a.config.infinity?b.addEventListener("click",a.handleClickPagination.bind(a,c+1)):b.addEventListener("click",a.handleClickPagination.bind(a,c))})}else this.slider.querySelector(".swish-pagination")&&this.slider.querySelector(".swish-pagination").remove()}},{key:"handleClickPagination",value:function(a){this.counter=a,this.move()}},{key:"clearClonedItmes",value:function(){var a=this;this.list=this.slider.querySelector(".swish-list"),this.spreadHtmlArrayHelper(this.list.children).forEach(function(b){b.classList.contains("cloned")&&a.list.removeChild(b)})}},{key:"infinity",value:function(){var a=this;this.list=this.slider.querySelector(".swish-list"),this.sizeItem=this.getSize(this.slider.offsetWidth,this.config.slides,this.config.shifted),this.clearClonedItmes(),this.spreadHtmlArrayHelper(this.list.children).filter(function(a){return!a.classList.contains("cloned")}).slice(0,this.config.slides).map(function(a){return a.cloneNode(!0)}).forEach(function(b){b.classList.add("cloned"),a.list.insertAdjacentElement("beforeEnd",b)}),this.spreadHtmlArrayHelper(this.list.children).filter(function(a){return!a.classList.contains("cloned")}).slice(-this.config.slides).map(function(a){return a.cloneNode(!0)}).reverse().forEach(function(b){b.classList.add("cloned"),a.list.insertAdjacentElement("afterBegin",b)})}},{key:"move",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.direction,d=void 0===c?0:c;0<d?this.counter--:0>d&&this.counter++,this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),this.config.infinity?0>=this.counter?(this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),this.currentTransform=-(this.sizeItem*this.counter)+this.config.shifted/2,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)"),this.counter=this.itemsLength-this.config.slides-this.config.slides,this.preventMove=!0,setTimeout(function(){a.list.style.transition="transform 0s ease 0s",a.currentTransform=-(a.sizeItem*(a.itemsLength-a.config.slides-a.config.slides))+a.config.shifted/2,a.list.style[a.transformCss]="translate3d(".concat(a.currentTransform,"px, 0, 0)"),a.counter=a.itemsLength-a.config.slides-a.config.slides,a.preventMove=!1},this.speed)):this.counter>=this.itemsLength-this.config.slides?(this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),this.currentTransform=-(this.sizeItem*this.counter)+this.config.shifted/2,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)"),this.counter=this.config.slides,this.preventMove=!0,setTimeout(function(){a.list.style.transition="transform 0s ease 0s",a.currentTransform=-(a.sizeItem*a.config.slides)+a.config.shifted/2,a.list.style[a.transformCss]="translate3d(".concat(a.currentTransform,"px, 0, 0)"),a.counter=a.config.slides,a.preventMove=!1},this.speed)):(this.preventMove=!0,this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),this.currentTransform=-(this.sizeItem*this.counter)+this.config.shifted/2,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)"),setTimeout(function(){a.preventMove=!1},this.speed)):(this.preventMove=!0,0>=this.counter?(this.counter=0,this.currentTransform=-(this.sizeItem*this.counter)):this.counter>=this.itemsLength-this.config.slides?(this.counter=this.itemsLength-this.config.slides,this.currentTransform=-(this.sizeItem*(this.itemsLength-this.config.slides))+this.config.shifted):this.currentTransform=-(this.sizeItem*this.counter)+this.config.shifted/2,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)"),setTimeout(function(){a.preventMove=!1},this.speed)),this.activeSetter(this.list),this.paginationActiveSetter(this.slider.querySelector(".swish-pagination__list"))}},{key:"getCoords",value:function(a){var b=a.getBoundingClientRect(),d=document.body,e=document.documentElement,f=window.pageXOffset||e.scrollLeft||d.scrollLeft,g=e.clientLeft||d.clientLeft||0,h=b.left+f-g;return{left:c(h)}}},{key:"handleConrolsClick",value:function(a){if(!this.preventMove)switch(a.currentTarget.getAttribute("data-swish-dir")){case"next":this.move({direction:-1});break;case"prev":this.move({direction:1});}}},{key:"handleTouchStart",value:function(a){this.preventMove||(a.stopPropagation(),this.touch.isTouch=!0,this.delayAndDir=0,this.list.style.transition="transform 0s ease 0s",this.touch.startX=a.touches[0].clientX,this.touch.startY=a.touches[0].clientY)}},{key:"handleTouchMove",value:function(a){a.stopPropagation(),this.touch.moveX=a.touches[0].clientX,this.touch.moveY=a.touches[0].clientY,null===this.touch.isTouchAction&&(this.touch.isTouchAction=b(this.touch.moveX-this.touch.startX)>b(this.touch.moveY-this.touch.startY)),this.touch.isTouchAction?this.touch.canMove=!0:(this.touch.isTouch=!1,this.touch.canMove=!1),this.touch.canMove&&this.touch.isTouch&&(a.preventDefault(),this.list.style.transition="transform 0s ease 0s",this.delayAndDir=c(this.touch.move-this.touch.startX),this.touch.move=a.changedTouches[0].clientX,this.list.style[this.transformCss]="translate3d(".concat(c(this.touch.move-this.touch.startX)+this.currentTransform,"px, 0, 0)"))}},{key:"handleTouchEnd",value:function(a){a.stopPropagation(),this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),b(this.delayAndDir)>this.touch.delay?this.move({direction:this.delayAndDir}):this.move({direction:0}),this.touch.isTouch=!1,this.touch.isTouchAction=null}},{key:"handleMousedown",value:function(a){if(!this.preventMove){var b=this.getCoords(this.list);a.preventDefault(),a.stopPropagation(),this.dragOffset=0,this.drag.move=!0,this.isGrab(),this.drag.startX=a.pageX,this.drag.shiftX=a.pageX-b.left}}},{key:"handleMousemove",value:function(a){this.preventMove||(a.preventDefault(),this.dragOffset=this.drag.endX-this.drag.startX,this.drag.move&&(this.drag.endX=a.pageX,this.list.style.transition="transform 0s ease 0s",this.currentTransform=a.pageX-this.drag.shiftX-this.slider.getBoundingClientRect().left,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)")))}},{key:"handleMouseup",value:function(){this.preventMove||(this.drag.move&&b(this.dragOffset)>this.touch.delay?this.move({direction:this.dragOffset}):this.move(),this.isGrab(!1),this.list.style.transition="transform ".concat(this.speed,"ms ease 0s"),this.drag.move=!1)}},{key:"handleMouseleave",value:function(){this.preventMove||(this.drag.move&&this.handleMouseup(),this.list.removeAttribute("is-drag"))}},{key:"handleResize",value:function(){this.list.style.transition="transform 0s ease 0s",clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.updateAfterResize.bind(this),100)}},{key:"updateConfig",value:function(a){this.config=a?Object.assign({},this.defaultConfig,a):Object.assign({},this.defaultConfig),this.init()}},{key:"updateAfterResize",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.isCreated;if(this.cacheWindowSize!=document.documentElement.clientWidth||void 0!==c&&c){var d=this.responsivePoints.filter(function(a){return a>document.documentElement.clientWidth}).sort(function(c,a){return c-a}),e=this.responsivePoints.indexOf(d[0]),f=Object.keys(this.config.responsive).map(function(b){return a.config.responsive[b]});this.updateConfig(f[e]),this.cacheWindowSize=document.documentElement.clientWidth,this.sizeItem=this.getSize(this.slider.offsetWidth,this.config.slides,this.config.shifted),this.sizeList=this.getSizeContainer(this.sizeItem,this.listItems.length),this.setSize(this.listItems,this.sizeItem),this.setSizeContainer(this.list,this.sizeList),this.move(),this.list.style.transition="transform ".concat(this.speed,"ms ease 0s")}}},{key:"addEvents",value:function(){var a=this;window.addEventListener("resize",this.handleResize.bind(this)),this.list.addEventListener("mousedown",this.handleMousedown.bind(this)),this.list.addEventListener("mouseup",this.handleMouseup.bind(this)),this.list.addEventListener("mouseleave",this.handleMouseleave.bind(this)),this.list.addEventListener("mousemove",this.handleMousemove.bind(this)),this.list.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.list.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.list.addEventListener("touchend",this.handleTouchEnd.bind(this)),this.spreadHtmlArrayHelper(this.controls).forEach(function(b){b.addEventListener("click",a.handleConrolsClick.bind(a))})}},{key:"init",value:function(){this.config.shifted=this.config.hasOwnProperty("shifted")?+this.config.shifted:0,this.config.slides=this.config.hasOwnProperty("slides")?+this.config.slides:1,this.config.hasOwnProperty("infinity")&&this.config.infinity&&(this.config.infinity=!0,this.counter=this.config.slides),this.config.infinity?this.infinity():this.clearClonedItmes(),this.list=this.slider.querySelector(".swish-list"),this.listItems=this.slider.querySelectorAll(".swish-list__item"),this.listItemsNoCloned=this.spreadHtmlArrayHelper(this.slider.querySelectorAll(".swish-list__item")).filter(function(a){return!a.classList.contains("cloned")}),this.sizeItem=this.getSize(this.slider.offsetWidth,this.config.slides,this.config.shifted),this.sizeList=this.getSizeContainer(this.sizeItem,this.listItems.length),this.itemsLength=this.listItems.length,this.controls=this.slider.querySelectorAll("[data-swish-dir]"),this.setSize(this.listItems,this.sizeItem),this.setSizeContainer(this.list,this.sizeList),this.pagination()}},{key:"create",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.config=this.slider.hasAttribute("config")?JSON.parse(this.slider.getAttribute("config").replace(/'/g,"\"")):a,this.defaultConfig=this.slider.hasAttribute("config")?JSON.parse(this.slider.getAttribute("config").replace(/'/g,"\"")):a,this.responsivePoints=this.config.responsive?Object.keys(this.config.responsive).map(function(a){return+a}).sort(function(c,a){return c-a}):[],this.init(),this.speed=this.config.speed?1e3*this.config.speed:1e3*+window.getComputedStyle(this.list).transitionDuration.replace(/[^0-9.]/gim,""),this.list.style.transitionDuration="0s",this.addEvents(),this.pagination(),this.activeSetter(this.list),this.paginationActiveSetter(this.slider.querySelector(".swish-pagination__list")),this.currentTransform=-(this.sizeItem*this.counter)+this.config.shifted/2,this.list.style[this.transformCss]="translate3d(".concat(this.currentTransform,"px, 0, 0)"),this.updateAfterResize({isCreated:!0})}}]),a}(),swish=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.selectors,c=a.config,d=void 0===c?{}:c;Array.prototype.slice.call(b).forEach(function(a){new Swish(a).create(d)})};